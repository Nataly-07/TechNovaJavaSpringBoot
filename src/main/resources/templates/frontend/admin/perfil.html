<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Perfil Administrador - Technova</title>

    <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" th:href="@{/frontend/css/estilodas.css}">
    <link rel="stylesheet" th:href="@{/frontend/css/stilotech.css}">
    <link rel="stylesheet" th:href="@{/frontend/css/color-palette.css}">
    <style>
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 6px 24px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }
        
        .card-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
        }
        
        .card-icon i {
            font-size: 24px;
            color: white;
        }
        
        .card-content h3 {
            font-size: 1.3rem;
            font-weight: 700;
            color: #2c3e50;
            margin: 0 0 6px 0;
        }
        
        .card-content p {
            color: #7f8c8d;
            font-size: 0.9rem;
            margin: 0 0 15px 0;
            line-height: 1.4;
        }
        
        .card-stats {
            display: flex;
            flex-direction: column;
            margin-bottom: 18px;
        }
        
        .stat-number {
            font-size: 1.6rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 4px;
        }
        
        .stat-label {
            font-size: 0.8rem;
            font-weight: 500;
            color: #7f8c8d;
            text-transform: lowercase;
        }
        
        .card-button {
            display: inline-flex;
            align-items: center;
            padding: 10px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-decoration: none;
            border-radius: 10px;
            font-weight: 600;
            font-size: 0.85rem;
            transition: all 0.3s ease;
            box-shadow: 0 3px 12px rgba(102, 126, 234, 0.3);
        }
        
        .card-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
            color: white;
            text-decoration: none;
        }
    </style>
</head>
<body>
  <header class="header">
    <div class="logo" style="cursor: default;">
      <img th:src="@{/frontend/imagenes/logo technova.png}" alt="Logo">
      <span>TECHNOVA</span>
    </div>

    <div class="acciones-usuario">
      <a th:href="@{/admin/perfil}" class="account"><i class='bx bx-user-circle'></i> <span>Perfil</span></a>
      <form method="POST" th:action="@{/logout}" style="display:inline;">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        <button type="submit" style="background:none;border:none;color:inherit;cursor:pointer;display:inline-flex;align-items:center;gap:5px;" class="account">
          <i class='bx bx-log-out'></i> <span>Cerrar Sesión</span>
        </button>
      </form>
    </div>
  </header>

  <div class="dashboard-wrapper">
    <div th:replace="~{frontend/layouts/sidebar-admin :: sidebar}"></div>

    <main class="main-content">
      <div class="welcome-section">
        <h1>¡Bienvenido, <span th:text="${usuario != null ? usuario.name : 'Administrador'}">Administrador</span>!</h1>
        <p>Panel de administración de Technova</p>
      </div>

      <div class="profile-card">
        <img th:src="@{/frontend/imagenes/userim.png}" alt="Foto de perfil">
        <div class="profile-details">
          <h2 th:text="${usuario != null ? usuario.name : 'Administrador'}">Administrador</h2>
          <p><i class='bx bx-envelope'></i> <span th:text="${usuario != null ? usuario.email : 'admin@technova.com'}">admin@technova.com</span></p>
          <p><i class='bx bx-shield'></i> <span th:text="${usuario != null && usuario.role != null ? usuario.role : 'admin'}">Administrador</span></p>
          <a th:href="@{/perfil/edit}" class="edit-profile"><i class='bx bx-edit'></i> Editar perfil</a>
        </div>
      </div>

      <div class="dashboard-cards">
        <div class="card">
          <div class="card-icon">
            <i class='bx bx-user'></i>
          </div>
          <div class="card-content">
            <h3>Gestión de Usuarios</h3>
            <p>Administra usuarios del sistema</p>
            <div class="card-stats">
              <span class="stat-number" th:text="${usersCount != null ? usersCount : 0}">0</span>
              <span class="stat-label">usuarios registrados</span>
            </div>
            <a th:href="@{/login}" class="card-button">
              <i class='bx bx-right-arrow-alt'></i> Gestionar Usuarios
            </a>
          </div>
        </div>

        <div class="card">
          <div class="card-icon">
            <i class='bx bx-shopping-bag'></i>
          </div>
          <div class="card-content">
            <h3>Movimiento de Artículos</h3>
            <p>Controla ingresos, salidas y stock</p>
            <div class="card-stats">
              <span class="stat-number" th:text="${productosCount != null ? productosCount : 0}">0</span>
              <span class="stat-label">productos en inventario</span>
            </div>
            <a th:href="@{/login}" class="card-button">
              <i class='bx bx-right-arrow-alt'></i> Gestionar Movimientos
            </a>
          </div>
        </div>

        <div class="card">
          <div class="card-icon">
            <i class='bx bx-chart'></i>
          </div>
          <div class="card-content">
            <h3>Reportes</h3>
            <p>Visualiza métricas del negocio</p>
            <div class="card-stats">
              <span class="stat-number" th:text="${reportesDisponibles != null ? reportesDisponibles : 3}">3</span>
              <span class="stat-label">reportes disponibles</span>
            </div>
            <a th:href="@{/admin/reportes}" class="card-button">
              <i class='bx bx-right-arrow-alt'></i> Ver Reportes
            </a>
          </div>
        </div>

        <div class="card">
          <div class="card-icon">
            <i class='bx bx-user-circle'></i>
          </div>
          <div class="card-content">
            <h3>Proveedores</h3>
            <p>Gestiona proveedores y compras</p>
            <div class="card-stats">
              <span class="stat-number" th:text="${proveedoresCount != null ? proveedoresCount : 0}">0</span>
              <span class="stat-label">proveedores activos</span>
            </div>
            <a th:href="@{/login}" class="card-button">
              <i class='bx bx-right-arrow-alt'></i> Gestionar Proveedores
            </a>
          </div>
        </div>

        <div class="card">
          <div class="card-icon">
            <i class='bx bx-message'></i>
          </div>
          <div class="card-content">
            <h3>Mensajes</h3>
            <p>Gestiona comunicación del sistema</p>
            <div class="card-stats">
              <span class="stat-number">-</span>
              <span class="stat-label">mensajes pendientes</span>
            </div>
            <a th:href="@{/login}" class="card-button">
              <i class='bx bx-right-arrow-alt'></i> Ver Mensajes
            </a>
          </div>
        </div>

        <div class="card">
          <div class="card-icon">
            <i class='bx bx-cart'></i>
          </div>
          <div class="card-content">
            <h3>Pedidos</h3>
            <p>Gestiona pedidos y ventas</p>
            <div class="card-stats">
              <span class="stat-number">-</span>
              <span class="stat-label">pedidos procesados</span>
            </div>
            <a th:href="@{/login}" class="card-button">
              <i class='bx bx-right-arrow-alt'></i> Ver Pedidos
            </a>
          </div>
        </div>

        <div class="card">
          <div class="card-icon">
            <i class='bx bx-credit-card'></i>
          </div>
          <div class="card-content">
            <h3>Pagos</h3>
            <p>Gestiona transacciones y pagos</p>
            <div class="card-stats">
              <span class="stat-number">-</span>
              <span class="stat-label">transacciones procesadas</span>
            </div>
            <a th:href="@{/login}" class="card-button">
              <i class='bx bx-right-arrow-alt'></i> Ver Pagos
            </a>
          </div>
        </div>
      </div>
    </main>
  </div>

  <footer>
    <p>&copy; 2025 Technova</p>
  </footer>
</body>
</html>
