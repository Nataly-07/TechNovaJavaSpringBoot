<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Technova - Bienvenido</title>
  <link rel="stylesheet" th:href="@{/frontend/css/stilotech.css}">
  <link rel="stylesheet" th:href="@{/frontend/css/producto.css}">
</head>
<body>
<header class="header">
  <a th:href="@{/}" class="logo">
    <img src="https://res.cloudinary.com/dfdwv2z0q/image/upload/v1731692108/technova/logo-technova.png" alt="Logo" style="cursor:pointer;">
    <span>TECHNOVA</span>
  </a>

  <div class="acciones-usuario">
    <a th:href="@{/cliente/perfil}" class="account">
      <span>Perfil</span>
    </a>
    <a th:href="@{/favoritos}" class="account" style="position: relative;">
      <span>â¤ï¸ Favoritos</span>
      <th:block th:if="${favoritosCount != null and favoritosCount > 0}">
        <span style="position:absolute; top:-6px; right:-6px; background:#e63946; color:#fff; border-radius:12px; padding:2px 6px; font-size:12px; line-height:1; font-weight:700;" th:text="${favoritosCount}">0</span>
      </th:block>
    </a>
    <a th:href="@{/carrito}" class="account" style="position: relative;">
      <span>ğŸ›’ Carrito</span>
      <th:block th:if="${carritoCount != null and carritoCount > 0}">
        <span style="position:absolute; top:-6px; right:-6px; background:#e63946; color:#fff; border-radius:12px; padding:2px 6px; font-size:12px; line-height:1; font-weight:700;" th:text="${carritoCount}">0</span>
      </th:block>
    </a>
    <form method="POST" th:action="@{/logout}" style="display:inline;">
      <button type="submit" style="background:none;border:none;color:inherit;cursor:pointer;display:inline-flex;align-items:center;gap:5px;" class="account">
        <span>Cerrar SesiÃ³n</span>
      </button>
    </form>
  </div>
</header>
<nav class="menu-principal">
  <ul>
    <li><a th:href="@{/}">Inicio</a></li>
      <li class="submenu">
      <a href="#">CategorÃ­as â–¾</a>
      <ul class="submenu-lista">
        <li><a th:href="@{/categoria/celulares}">ğŸ“± Celulares</a></li>
        <li><a th:href="@{/categoria/portatiles}">ğŸ’» PortÃ¡tiles</a></li>
      </ul>
    </li>
    <li class="submenu">
      <a href="#">Marcas â–¾</a>
      <ul class="submenu-lista">
        <li><a th:href="@{/marca/apple}">ğŸ Apple</a></li>
        <li><a th:href="@{/marca/samsung}">ğŸ“± Samsung</a></li>
        <li><a th:href="@{/marca/motorola}">ğŸ“ Motorola</a></li>
        <li><a th:href="@{/marca/xiaomi}">ğŸ§¡ Xiaomi</a></li>
        <li><a th:href="@{/marca/oppo}">ğŸ“² OPPO</a></li>
        <li><a th:href="@{/marca/lenovo}">ğŸ’» Lenovo</a></li>
      </ul>
    </li>
  </ul>
</nav>

<div class="mas-vendido-container">
    <div class="mas-vendido-header">
      <span class="vendido">Lo mÃ¡s vendido</span>
      <a href="#" class="ver-mas">Ver mÃ¡s</a>
    </div>

    <div class="carrusel-productos-contenedor">
      <button class="carrusel-btn prev">&#10094;</button>

      <div class="carrusel-track">
        <div class="producto" th:each="producto : ${productos}">
          <img th:src="${producto.imagen != null and !#strings.isEmpty(producto.imagen) and #strings.startsWith(producto.imagen, 'http') 
                        ? producto.imagen 
                        : (producto.imagen != null and !#strings.isEmpty(producto.imagen) 
                            ? '/frontend/imagenes/' + producto.imagen 
                            : '/frontend/imagenes/placeholder.png')}"
               th:alt="${producto.nombre}">
          <a th:href="@{'/producto/' + ${producto.id}}"><span class="detalles">Ver MÃ¡s Detalles</span></a>
          <h3 th:text="${producto.nombre}">Producto</h3>
          <p>4.5 â­</p>
          <th:block th:if="${producto.precioOriginal != null and producto.precioDescuento != null}">
            <p class="precio-original">
              $<span th:text="${producto.precioOriginal}">0</span>
            </p>
            <p class="precio-descuento">
              $<span th:text="${producto.precioDescuento}">0</span>
              <span class="descuento">-5%</span>
            </p>
          </th:block>
          <form th:action="@{'/carrito/agregar/' + ${producto.id}}" method="POST" style="display: inline;">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
            <button type="submit" class="carrito-btn" style="text-decoration: none; color: white; display: inline-flex; align-items: center; justify-content: center; background: var(--gradient-secondary); border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 18px; cursor: pointer;">&#128722;</button>
          </form>
        </div>
      </div>

      <button class="carrusel-btn next">&#10095;</button>
    </div>
</div>

<div class="info-botones">
    <div class="info-btn">
        <span class="icon">&#128666;</span>
        <span>Envios<br>gratis</span>
    </div>
    <div class="info-btn">
        <span class="icon">&#128179;</span>
        <span>Metodos<br>de pago</span>
    </div>
    <div class="info-btn">
        <span class="icon">&#128100;</span>
        <span>Asistencia<br>virtual</span>
    </div>
</div>

<div class="ofertas-container" style="background: var(--gradient-light); padding: 20px 25px; border-radius: 10px; overflow: hidden; max-width: 100%; box-sizing: border-box; display: flex; gap: 25px; justify-content: center; flex-wrap: nowrap;">
    <div class="bloque" style="margin-bottom: 40px; overflow: hidden; flex: 0 0 300px; display: flex; flex-direction: column; align-items: center; justify-content: center;">
        <span class="vendido1" style="background: var(--gradient-secondary); color: white; padding: 6px 15px; border-radius: 15px; font-weight: bold; font-size: 1em; align-self: flex-start;">Oferta del dia</span>
        <div class="producto-card" style="background: white; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); padding: 15px 15px 70px 15px; width: 240px; text-align: center; position: relative; margin-top: 12px; overflow: hidden; display: flex; flex-direction: column; align-items: center; justify-content: center;" th:if="${productos != null and !productos.isEmpty()}">
            <img th:src="${productos[0].imagen != null and !#strings.isEmpty(productos[0].imagen) and #strings.startsWith(productos[0].imagen, 'http') 
                          ? productos[0].imagen 
                          : (productos[0].imagen != null and !#strings.isEmpty(productos[0].imagen) 
                              ? '/frontend/imagenes/' + productos[0].imagen 
                              : '/frontend/imagenes/placeholder.png')}"
                 th:alt="${productos[0].nombre}" style="width: 180px; height: auto; margin: 0 auto; display: block; border-radius: 10px;">
            <a th:href="@{'/producto/' + ${productos[0].id}}" style="display: inline-block; margin: 15px 0; background: var(--gradient-secondary); color: white; padding: 8px 15px; border-radius: 12px; font-weight: bold; font-size: 1em; text-decoration: none;">Ver MÃ¡s Detalles</a>
            <h3 style="font-weight: bold; margin: 12px 0 8px; font-size: 1.2em;" th:text="${productos[0].nombre}">Producto</h3>
            <p style="margin: 8px 0; font-size: 1em;">4.9 â­</p>
            <th:block th:if="${productos[0].precioOriginal != null and productos[0].precioDescuento != null}">
              <p class="precio-original" style="text-decoration: line-through; color: gray; margin: 8px 0; font-size: 0.9em;">
                $<span th:text="${productos[0].precioOriginal}">0</span>
              </p>
              <p class="precio-descuento" style="color: #006600; font-weight: bold; margin: 8px 0; font-size: 1.1em;">
                $<span th:text="${productos[0].precioDescuento}">0</span>
                <span class="descuento" style="background-color: #cce5cc; color: #006600; padding: 3px 8px; border-radius: 6px; font-size: 0.9em; margin-left: 8px;">-5%</span>
              </p>
            </th:block>
            <form th:action="@{'/carrito/agregar/' + ${productos[0].id}}" method="POST" style="position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%); display: inline;">
              <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
              <button type="submit" class="carrito-btn" style="background: var(--gradient-secondary); border: none; border-radius: 50%; width: 48px; height: 48px; color: white; font-size: 24px; cursor: pointer; text-decoration: none; display: inline-flex; align-items: center; justify-content: center;">
                &#128722;
              </button>
            </form>
        </div>
    </div>
     <div class="bloque" style="margin-top: 40px; overflow: hidden; flex: 0 0 660px;">
        <div class="bloque-header" style="display:flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
            <span class="vendido1" style="background: var(--gradient-secondary); color: white; padding: 6px 15px; border-radius: 15px; font-weight: bold; font-size: 1em;">Ofertas que te pueden interesar</span>
            <a href="#" class="ver-mas" style="color: #00d4ff; font-weight: bold; font-size: 1em; text-decoration: none;">Ver mas</a>
        </div>
        <div class="productos-grid" style="display: flex; gap: 20px; overflow: hidden; flex-wrap: nowrap; justify-content: flex-start;">
            <div class="producto-card" style="background: white; border-radius: 15px; box-shadow: 0 0 10px rgba(0,0,0,0.1); padding: 15px 15px 70px 15px; width: 200px; text-align: center; position: relative;" th:each="producto, iterStat : ${productos}" th:if="${iterStat.index < 3}">
                <img th:src="${producto.imagen != null and !#strings.isEmpty(producto.imagen) and #strings.startsWith(producto.imagen, 'http') 
                              ? producto.imagen 
                              : (producto.imagen != null and !#strings.isEmpty(producto.imagen) 
                                  ? '/frontend/imagenes/' + producto.imagen 
                                  : '/frontend/imagenes/placeholder.png')}"
                     th:alt="${producto.nombre}" style="width: 140px; height: auto; margin: 0 auto; display: block; border-radius: 10px;">
                <a th:href="@{'/producto/' + ${producto.id}}" style="display: inline-block; margin: 12px 0; background: var(--gradient-secondary); color: white; padding: 6px 12px; border-radius: 12px; font-weight: bold; font-size: 0.9em; text-decoration: none;">Ver MÃ¡s Detalles</a>
                <h3 style="font-weight: bold; margin: 10px 0 6px; font-size: 1em;" th:text="${producto.nombre}">Producto</h3>
                <p style="margin: 6px 0; font-size: 0.9em;">4.9 â­</p>
                <th:block th:if="${producto.precioOriginal != null and producto.precioDescuento != null}">
                  <p class="precio-original" style="text-decoration: line-through; color: gray; margin: 6px 0; font-size: 0.8em;">
                    $<span th:text="${producto.precioOriginal}">0</span>
                  </p>
                  <p class="precio-descuento" style="color: #006600; font-weight: bold; margin: 6px 0; font-size: 1em;">
                    $<span th:text="${producto.precioDescuento}">0</span>
                    <span class="descuento" style="background-color: #cce5cc; color: #006600; padding: 2px 6px; border-radius: 6px; font-size: 0.8em; margin-left: 6px;">-5%</span>
                  </p>
                </th:block>
                <form th:action="@{'/carrito/agregar/' + ${producto.id}}" method="POST" style="position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); display: inline;">
                  <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                  <button type="submit" class="carrito-btn" style="background: var(--gradient-secondary); border: none; border-radius: 50%; width: 40px; height: 40px; color: white; font-size: 20px; cursor: pointer; text-decoration: none; display: inline-flex; align-items: center; justify-content: center;">
                    &#128722;
                  </button>
                </form>
            </div>
        </div>
    </div>
</div>

<section class="navegacion-categorias">
  <h2>Explora por CategorÃ­a</h2>
  <div class="categorias-grid">
    <a th:href="@{/categoria/celulares}" class="categoria-item">ğŸ“± Celulares</a>
    <a th:href="@{/categoria/portatiles}" class="categoria-item">ğŸ’» PortÃ¡tiles</a>
  </div>
</section>

<section class="marcas">
  <h2>Marcas Populares</h2>
  <div class="brand-list">
    <img src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg" alt="Apple" />
    <img src="https://images.samsung.com/is/image/samsung/assets/global/about-us/brand/logo/360_197_1.png?$720_N_PNG$" alt="Samsung" />
    <img src="https://1000marcas.net/wp-content/uploads/2019/12/Xiaomi-Logo.png" alt="Xiaomi" />
    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e5/Motorola_logo.svg/1200px-Motorola_logo.svg.png" alt="Motorola" />
  </div>
</section>

<section class="navegacion-marcas">
  <h2>Busca por Marca</h2>
  <div class="marcas-grid">
    <a th:href="@{/marca/apple}" class="marca-item">ğŸ Apple</a>
    <a th:href="@{/marca/samsung}" class="marca-item">ğŸ“± Samsung</a>
    <a th:href="@{/marca/xiaomi}" class="marca-item">ğŸ§¡ Xiaomi</a>
    <a th:href="@{/marca/motorola}" class="marca-item">ğŸ“ Motorola</a>
    <a th:href="@{/marca/lenovo}" class="marca-item">ğŸ’» Lenovo</a>
    <a th:href="@{/marca/oppo}" class="marca-item">ğŸ“² OPPO</a>
  </div>
</section>

<footer>
    <p>Â© 2025 TECHNOVA. Todos los derechos reservados.</p>
</footer>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script th:src="@{/frontend/js/script.js}" defer></script>
</body>
</html>




